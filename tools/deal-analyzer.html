<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Deal Analyzer | Temple TX Homes</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;background:#f8fafc;color:#1e293b;line-height:1.6}
.container{max-width:1000px;margin:0 auto;padding:24px 16px}
h1{font-size:1.75rem;margin-bottom:4px}
.subtitle{color:#64748b;margin-bottom:4px;font-size:0.95rem}
.updated{color:#94a3b8;font-size:0.8rem;margin-bottom:24px}
.layout{display:grid;grid-template-columns:1fr 1fr;gap:28px;align-items:start}
@media(max-width:700px){.layout{grid-template-columns:1fr}}
.card{background:#fff;border-radius:10px;border:1px solid #e2e8f0;padding:24px}
.card h2{font-size:1.1rem;margin-bottom:16px;padding-bottom:8px;border-bottom:2px solid #e2e8f0}
.field{margin-bottom:14px}
.field label{display:block;font-size:0.85rem;font-weight:600;margin-bottom:4px;color:#475569}
.field input{width:100%;padding:9px 12px;border:1.5px solid #e2e8f0;border-radius:6px;font-size:1rem;color:#1e293b;transition:border-color .15s}
.field input:focus{outline:none;border-color:#059669}
.row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
.results h2{color:#059669}
.metric{display:flex;justify-content:space-between;padding:10px 0;border-bottom:1px solid #f1f5f9}
.metric:last-child{border-bottom:none}
.metric-label{font-size:0.88rem;color:#64748b}
.metric-value{font-size:1.05rem;font-weight:700}
.positive{color:#059669}
.negative{color:#dc2626}
footer{text-align:center;margin-top:32px;color:#94a3b8;font-size:0.8rem}
</style>
</head>
<body>
<div class="container">
<h1>Turnkey Deal Analyzer</h1>
<p class="subtitle">Evaluate rental property deals in Central Texas.</p>
<p class="updated" id="updatedDate"></p>

<div class="layout">
<div class="card">
<h2>Property Inputs</h2>
<div class="field"><label>Purchase Price ($)</label><input type="number" id="price" step="1000"></div>
<div class="row">
<div class="field"><label>Down Payment (%)</label><input type="number" id="downPct" step="0.5"></div>
<div class="field"><label>Interest Rate (%)</label><input type="number" id="rate" step="0.125"></div>
</div>
<div class="field"><label>Estimated Monthly Rent ($)</label><input type="number" id="rent" step="25"></div>
<div class="row">
<div class="field"><label>Annual Property Taxes ($)</label><input type="number" id="taxes" step="100"></div>
<div class="field"><label>Annual Insurance ($)</label><input type="number" id="insurance" step="50"></div>
</div>
<div class="row">
<div class="field"><label>Maintenance Reserves (%)</label><input type="number" id="maintenance" step="0.5"></div>
<div class="field"><label>Vacancy Rate (%)</label><input type="number" id="vacancy" step="0.5"></div>
</div>
</div>

<div class="card results">
<h2>Deal Results</h2>
<div id="results"></div>
</div>
</div>

<footer>For informational purposes only. Verify all numbers independently.<br>&copy; templetxhomes.net</footer>
</div>

<script>
// ============================================================
// MARKET_DEFAULTS â€” Update these as market conditions change
// ============================================================
const MARKET_DEFAULTS = {
  price: 250000,
  downPct: 20,
  rate: 6.875,
  rent: 1500,
  taxes: 6000,
  insurance: 1800,
  maintenance: 5,
  vacancy: 8,
  LAST_UPDATED: "2025-01-15"
};

document.getElementById("updatedDate").textContent = "Market defaults last updated: " + MARKET_DEFAULTS.LAST_UPDATED;

const ids = ["price","downPct","rate","rent","taxes","insurance","maintenance","vacancy"];
ids.forEach(id => {
  const el = document.getElementById(id);
  el.value = MARKET_DEFAULTS[id];
  el.addEventListener("input", calculate);
});

function getVal(id) { return parseFloat(document.getElementById(id).value) || 0; }

function calculate() {
  const price = getVal("price");
  const downPct = getVal("downPct") / 100;
  const annualRate = getVal("rate") / 100;
  const rent = getVal("rent");
  const taxes = getVal("taxes");
  const insurance = getVal("insurance");
  const maintPct = getVal("maintenance") / 100;
  const vacancyPct = getVal("vacancy") / 100;

  const downPayment = price * downPct;
  const loanAmount = price - downPayment;
  const monthlyRate = annualRate / 12;
  const n = 360; // 30-year fixed

  let monthlyMortgage = 0;
  if (loanAmount > 0 && monthlyRate > 0) {
    monthlyMortgage = loanAmount * (monthlyRate * Math.pow(1 + monthlyRate, n)) / (Math.pow(1 + monthlyRate, n) - 1);
  }

  const grossIncome = rent * 12;
  const effectiveIncome = grossIncome * (1 - vacancyPct);
  const opex = taxes + insurance + (grossIncome * maintPct);
  const noi = effectiveIncome - opex;
  const annualDebtService = monthlyMortgage * 12;
  const annualCashFlow = noi - annualDebtService;
  const monthlyCashFlow = annualCashFlow / 12;
  const cashOnCash = downPayment > 0 ? (annualCashFlow / downPayment) * 100 : 0;
  const capRate = price > 0 ? (noi / price) * 100 : 0;

  const fmt = v => "$" + Math.round(v).toLocaleString();
  const pct = v => v.toFixed(2) + "%";
  const cfClass = v => v >= 0 ? "positive" : "negative";

  const metrics = [
    ["Monthly Mortgage", fmt(monthlyMortgage), ""],
    ["Net Operating Income", fmt(noi), cfClass(noi)],
    ["Monthly Cash Flow", fmt(monthlyCashFlow), cfClass(monthlyCashFlow)],
    ["Annual Cash Flow", fmt(annualCashFlow), cfClass(annualCashFlow)],
    ["Cash-on-Cash Return", pct(cashOnCash), cfClass(cashOnCash)],
    ["Cap Rate", pct(capRate), ""]
  ];

  document.getElementById("results").innerHTML = metrics.map(([label, value, cls]) =>
    `<div class="metric"><span class="metric-label">${label}</span><span class="metric-value ${cls}">${value}</span></div>`
  ).join("");
}

calculate();
</script>
</body>
</html>
